(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(t,e,n){},44:function(t,e,n){},46:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var a=n(2),i=n.n(a),s=n(15),c=n.n(s),o=(n(21),n(5)),r=n(16),d=n.n(r),u=n(3),p=n.n(u),m=(n(44),n(0));function h(){var t=Object(a.useState)({token:void 0,user_id:void 0}),e=Object(o.a)(t,2),n=e[0],i=e[1],s=Object(a.useState)([{text:"Po\u0142\u0105czy\u0142e\u015b si\u0119 z Asystentem \u017bywieniowym",timestamp:1578366389250,type:"notification"}]),c=Object(o.a)(s,2),r=c[0],u=c[1],h=function(t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"card-title",children:t.title_id}),Object(m.jsx)("div",{className:"card-desc",children:t.description}),Object(m.jsxs)("div",{className:"card-link",children:["Recipe: ",Object(m.jsx)("a",{href:t.link,children:t.link})]}),Object(m.jsx)("img",{src:t.img,alt:t.title_id})]})};Object(a.useEffect)((function(){p.a.post("http://164.90.161.190:8080/auth",{},{header:"Content-Type: application/json"}).then((function(t){i(t.data)}))}),[]),Object(a.useEffect)((function(){if(n.token){var t={headers:{Authorization:"Bearer "+n.token,"Content-Type":"application/json"}};p.a.post("http://164.90.161.190:8080/add_event",{type:"message",body:{message:"init request"}},t).then((function(t){u((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:t.data[0].body.message,type:"text",timestamp:+new Date})}))}))}}),[n]);return Object(m.jsx)("div",{className:"main-container",children:Object(m.jsx)("div",{className:"chatbox-container",children:Object(m.jsx)(d.a,{messages:r,userId:1,onSendMessage:function(t){if(u((function(e){return e.concat({author:{username:"User",id:1},text:t,timestamp:+new Date,type:"text"})})),n.token){var e={headers:{Authorization:"Bearer "+n.token,"Content-Type":"application/json"}},a={type:"message",body:{message:t}};p.a.post("http://164.90.161.190:8080/add_event",a,e).then((function(t){"message"===t.data[0].type?function(t){u((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:t.data[0].body.message,type:"text",timestamp:+new Date})}))}(t):"card"===t.data[0].type&&function(t){u((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:h(t.data[0].body),type:"text",timestamp:+new Date})}))}(t)}))}},width:"800px",height:"89vh"})})})}n(46);var l=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(h,{})})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),s(t),c(t)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(l,{})}),document.getElementById("root")),j()}},[[48,1,2]]]);
//# sourceMappingURL=main.e73bbfb7.chunk.js.map