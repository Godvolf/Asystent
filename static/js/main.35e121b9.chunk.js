(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,a){},58:function(t,e,a){},62:function(t,e,a){},63:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(9),o=a.n(s),c=(a(30),a(12)),r=a(22),d=a.n(r),p=a(10),u=a.n(p),l=a(77),m=a(23),h=a.n(m),f=(a(58),a(2));function g(){var t=Object(n.useState)({token:void 0,user_id:void 0}),e=Object(c.a)(t,2),a=e[0],i=e[1],s=Object(n.useState)([{text:"Po\u0142\u0105czy\u0142e\u015b si\u0119 z Asystentem \u017bywieniowym",timestamp:1578366389250,type:"notification"}]),o=Object(c.a)(s,2),r=o[0],p=o[1],m=function(t){p((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:g(t.body),type:"text",timestamp:+new Date})}))},g=function(t){return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"card-title",children:t.title_id}),Object(f.jsx)("div",{className:"card-desc",children:t.description}),Object(f.jsxs)("div",{className:"card-link",children:["Recipe: ",Object(f.jsx)("a",{href:t.link,children:t.link})]}),Object(f.jsx)("img",{style:{maxWidth:"600px"},src:t.img,alt:t.title_id})]})},v=function(t){var e;e="bot"===t.author_id?{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"}:{username:"User",id:1},p((function(a){return a.concat({author:e,text:t.body.message,type:"text",timestamp:+new Date})}))},j=function(t){return Object(f.jsx)(h.a,{starRatedColor:"yellow",numberOfStars:5,name:"rating",changeRating:function(e){!function(t,e,n){var i={headers:{Authorization:"Bearer "+a.token,"Content-Type":"application/json"}},s={event_id:n,type:"rating_event",body:{rating:t,dish_id:e}};u.a.post("https://foodasistant.ml/add_event",s,i).then((function(t){for(var e=0;e<t.data.length;e++)"message"===t.data[e].type&&v(t.data[e])}))}(e,t.body.dish_id,t.event_id)}})},y=function(t){p((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:j(t),type:"text",timestamp:+new Date})}))},b=function(t){var e=t.event_id;t=t.body.options;for(var n=[],i=function(i){n.push(Object(f.jsx)("div",{className:"select-option",children:Object(f.jsx)(l.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){!function(t,e){var n={headers:{Authorization:"Bearer "+a.token,"Content-Type":"application/json"}},i={event_id:e,type:"select",body:{selected_option_id:t}};u.a.post("https://foodasistant.ml/add_event",i,n).then((function(t){for(var e=0;e<t.data.length;e++)"message"===t.data[e].type?v(t.data[e]):"card"===t.data[e].type?m(t.data[e]):"select"===t.data[e].type?x(t.data[e]):"rating_event"===t.data[e].type&&(y(t.data[e]),console.log(t.data[e]))}))}(t[i].option_id,e)},children:t[i].option_text})},t[i].option_id))},s=0;s<t.length;s++)i(s);return Object(f.jsx)("div",{children:n})},x=function(t){p((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:b(t),type:"text",timestamp:+new Date})}))};Object(n.useEffect)((function(){u.a.post("https://foodasistant.ml/auth",{},{header:"Content-Type: application/json"}).then((function(t){i(t.data)}))}),[]),Object(n.useEffect)((function(){if(a.token){var t={headers:{Authorization:"Bearer "+a.token,"Content-Type":"application/json"}};u.a.post("https://foodasistant.ml/add_event",{type:"message",body:{message:"init request"}},t).then((function(t){p((function(e){return e.concat({author:{username:"Digital Assistant",id:2,avatarUrl:"https://image.flaticon.com/icons/svg/2446/2446032.svg"},text:t.data[0].body.message,type:"text",timestamp:+new Date})}))}))}}),[a]);return Object(f.jsx)("div",{className:"main-container",children:Object(f.jsx)("div",{className:"chatbox-container",children:Object(f.jsx)(d.a,{messages:r,userId:1,onSendMessage:function(t){if(p((function(e){return e.concat({author:{username:"User",id:1},text:t,timestamp:+new Date,type:"text"})})),a.token){var e={headers:{Authorization:"Bearer "+a.token,"Content-Type":"application/json"}},n={type:"message",body:{message:t}};u.a.post("https://foodasistant.ml/add_event",n,e).then((function(t){for(var e=0;e<t.data.length;e++)"message"===t.data[e].type?v(t.data[e]):"card"===t.data[e].type?m(t.data[e]):"select"===t.data[e].type?x(t.data[e]):console.log(t.data[e])}))}},width:"800px",height:"89vh"})})})}a(62);var v=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(g,{})})},j=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,o=e.getTTFB;a(t),n(t),i(t),s(t),o(t)}))};o.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),j()}},[[63,1,2]]]);
//# sourceMappingURL=main.35e121b9.chunk.js.map